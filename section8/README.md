# 테스트 가능한 설계

### 테스트 하기 어려운 코드

- 하드 코딩된 경로
- 의존 객체를 직접 생성
    - PayInfoDao payInfoDao = new PayInfoDao();
- 정적 메서드 사용
- 실행 시점에 따라 달라지는 결과
    - LocalDate.now();
- 역할이 섞여 있는 코드
- 메서드 중간에 소켓 통신 코드가 포함
- 콘솔에 입력을 받거나 결과를 콘솔에 출력
- 테스트 대상이 사용하는 의존 대상 클래스나 메서드가 final 일 경우
- 테스트 대상의 소스를 소유하고 있지 않아 수정이 어려운 경우

위와 같은 경우가 테스트코드를 작성하기에 어려운 주된 이유는 의존하는 코드를 교체할 수 있는 수단이 없기 때문이다.

상황에 따라 알맞은 방법을 적용하면 의존 코드를 교체할 수 있게 만들 수 있다.

### 테스트 가능한 설계

- 하드 코딩된 상수를 생성자나 메서드 파라미터로 받기
- 의존 대상을 주입 받기
- 테스트 하고 싶은 코드를 분리하기
- 시간이나 임의 값 생성 기능 분리하기
- 외부 라이브러리는 직접 사용하지 말고 감싸서 사용하기
